!function(e){function t(r){if(a[r])return a[r].exports;var s=a[r]={exports:{},id:r,loaded:!1};return e[r].call(s.exports,s,s.exports,t),s.loaded=!0,s.exports}var a={};return t.m=e,t.c=a,t.p="",t(0)}([function(e,t,a){a(1)},function(e,t,a){!function(e,t,r){function s(){for(var e=["form[automate-form]"],a=[],r=0;r<e.length;r++){var s=t.querySelectorAll(e[r]);s&&(a=a.concat(Array.prototype.slice.call(s)))}for(var r=0;r<a.length;r++){new c(a[r])}}var i=a(2),l=a(3),n=a(5),o=a(6),d=a(7),c=function(e){var a=this;a.el=e,a.name=e.getAttribute("automate-form").split("."),a.instance=a.name[0],a.name=a.name[1],a.getFormRequest=d({url:a.getUrlBase()+"/api/v1/forms/get_form?form_name="+a.name}).success(function(e){if(e.fields&&e.fields.length>0){for(var r=0;r<e.fields.length;r++)a.addField(e.fields[r]);a.submitEl=t.createElement("button"),a.submitEl.setAttribute("type","submit"),a.submitEl.classList.add(i.prefixClass("button")),a.submitEl.classList.add(i.prefixClass("submit-button"));var s=t.createElement("span");s.classList.add(i.prefixClass("button-text")),s.innerText="Submit",a.submitEl.appendChild(s);var l=t.createElement("span");l.classList.add(i.prefixClass("spinner")),a.submitEl.appendChild(l),a.el.appendChild(a.submitEl)}}),a.el.addEventListener("submit",function(e){e.preventDefault(),a.submitEl.setAttribute("disabled","");var t=new FormData(a.el);a.sumbitFormRequest=d({method:"POST",url:a.getPostUrl(),data:t}).success(function(e){console.log(e),a.submitEl.removeAttribute("disabled")})})};c.prototype.getUrlBase=function(){return"https://"+this.instance+".nebrios.com"},c.prototype.getPostUrl=function(){return this.getUrlBase()+"/api/v1/forms/post_form"},c.prototype.addStringField=function(e){var t=this,a=new l(e);t.el.appendChild(a.wrapperEl)},c.prototype.addIntegerField=function(e){var t=this,a=new n(e);t.el.appendChild(a.wrapperEl)},c.prototype.addDecimalField=function(e){var t=this,a=new o(e);t.el.appendChild(a.wrapperEl)},c.prototype.addField=function(e){var t=this;switch(e.type){case"string":t.addStringField(e);break;case"integer":t.addIntegerField(e);break;case"decimal":t.addDecimalField(e);break;default:console.warn("Uknown field type")}},e.AutomateForm=c,"loading"!==t.readyState?s():t.addEventListener("DOMContentLoaded",s)}(window,window.document)},function(e,t){var a={};a.cssClassPrefix="af-",a.prefixClass=function(e){return a.cssClassPrefix+e},e.exports=a},function(e,t,a){var r=a(2),s=a(4),i=function(e){var t=this;s.call(t,e),t.el.setAttribute("type","text"),t.el.classList.add(r.prefixClass("field--string"))};i.prototype=Object.create(s.prototype),i.prototype.constructor=i,e.exports=i},function(e,t,a){var r=a(2),s=function(e){var t=this,a=document.createElement("div");a.classList.add(r.prefixClass("field-wrapper"));var s=e.elementTag||"input";t.name=e.key;var i=e.inputName||e.key,l=document.createElement(s);if(l.setAttribute("name",i),l.setAttribute("id",i),e.placeholder&&(l.setAttribute("placeholder",e.placeholder||""),a.classList.add(r.prefixClass("field-has-placeholder"))),e.disabled&&l.setAttribute("disabled",""),e.val&&(l.setAttribute("value",e.val),a.classList.add(r.prefixClass("field-has-content"))),l.classList.add(r.prefixClass("field")),l.addEventListener("focus",function(e){t._onFieldFocus.call(t,e)}),l.addEventListener("blur",function(e){t._onFieldBlur.call(t,e)}),l.addEventListener("input",function(e){t._onFieldInput.call(t,e)}),l.addEventListener("keydown",function(e){t._onKeyDown.call(t,e)}),t.el=l,t.wrapperEl=a,a.appendChild(t.el),e.label!==!1){var n=document.createElement("label");n.setAttribute("for",e.inputName||e.key),n.innerText=e.label||e.key,n.classList.add(r.prefixClass("label")),a.appendChild(n)}};s.prototype.setValidCharacters=function(e){var t=this;t._validCharacters=new RegExp(e,"g")},s.prototype._onFieldFocus=function(e){var t=this;t.wrapperEl&&t.wrapperEl.classList.add(r.prefixClass("field-focused"))},s.prototype._onFieldBlur=function(e){var t=this;t.wrapperEl&&t.wrapperEl.classList.remove(r.prefixClass("field-focused"))},s.prototype._isValidCharacter=function(e){var t=this;return!t._validCharacters||!!e.match(t._validCharacters)},s.prototype._removeInvalidCharacters=function(e){var t=this;return t._validCharacters?e.match(t._validCharacters).join(""):e},s.prototype._onKeyDown=function(e){var t=this;console.log(e.key,e.keyCode),t._validCharacters&&(1!=e.key.length||t._isValidCharacter(e.key)||e.preventDefault())},s.prototype._onFieldInput=function(e){var t=this;t.value=t.el.value,t.wrapperEl&&(""!==t.value?t.wrapperEl.classList.add(r.prefixClass("field-has-content")):t.wrapperEl.classList.remove(r.prefixClass("field-has-content")))},e.exports=s},function(e,t,a){var r=a(2),s=a(4),i=function(e){var t=this;s.call(t,e),t.el.setAttribute("type","number"),t.el.classList.add(r.prefixClass("field--integer")),t.setValidCharacters(/\d/)};i.prototype=Object.create(s.prototype),i.prototype.constructor=i,e.exports=i},function(e,t,a){var r=a(2),s=a(4),i=function(e){var t=this;s.call(t,e),t.el.setAttribute("type","number"),t.el.classList.add(r.prefixClass("field--integer")),t.setValidCharacters(/\d/)};i.prototype=Object.create(s.prototype),i.prototype.constructor=i,e.exports=i},function(e,t){function a(e){var t=this;if(t.method=e.method||"GET",t.url=e.url,t.url||console.warn("URL not specified"),t._xhr=new XMLHttpRequest,t._xhr.onload=function(e){var a=e.target.responseText;try{a=JSON.parse(a)}catch(e){}finally{t._successCallback&&t._successCallback.call({},a)}},t._xhr.open(t.method,t.url),e.headers)for(header in e.headers)t._xhr.setRequestHeader(header,e.headers[header]);return e.data?t._xhr.send(e.data):t._xhr.send(),t.success=function(e){t._successCallback=e},t}e.exports=a}]);